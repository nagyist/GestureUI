<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>GClasses: GClasses::GBayesianNetworkNode Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespace_g_classes.html">GClasses</a>::<a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html">GBayesianNetworkNode</a>
  </div>
</div>
<div class="contents">
<h1>GClasses::GBayesianNetworkNode Class Reference</h1><!-- doxytag: class="GClasses::GBayesianNetworkNode" -->This is the base class for all nodes in a Bayesian network. Classes that inherit from this class must implement three pure virtual methods. Note that the <a class="el" href="class_g_classes_1_1_g_univariate_distribution.html" title="This is the base class for univariate distributions.">GUnivariateDistribution</a> class has an IsDiscrete and an IsSupported method, so if your class wraps a <a class="el" href="class_g_classes_1_1_g_univariate_distribution.html" title="This is the base class for univariate distributions.">GUnivariateDistribution</a> then two of them are taken care of for you. In order to implement ComputeLogLikelihood, your class will probably need references to its parent nodes so that it can obtain their values to use as parameters for its distribution. You can implement your network structure however you like. When you have your network set up, you're ready to use MCMC to infer values for the network. To do this, just create a loop that calls Sample on each node in the network, and the whole network should eventually converge to good values. (Also, you need to make <a class="el" href="class_g_classes_1_1_g_bayesian_network_child_iterator.html" title="Iterates through all the children of the specified node in a Bayesian network.">GBayesianNetworkChildIterator</a> work, which I haven't worked out yet.).  
<a href="#_details">More...</a>
<p>
<code>#include &lt;GBayesianNetwork.h&gt;</code>
<p>

<p>
<a href="class_g_classes_1_1_g_bayesian_network_node-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#980c95c3894ce7247465a1c5d22b0a8b">GBayesianNetworkNode</a> (double priorMean, double priorDeviation)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#1ea66de16e4313ea32fae405101c14da">~GBayesianNetworkNode</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#bc432f1459d8bef65a3b60cad16f0965">isDiscrete</a> ()=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This should return true iff this node supports only discrete values.  <a href="#bc432f1459d8bef65a3b60cad16f0965"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#7d9b8d026e832facc4c9088b3f7e40ad">isSupported</a> (double val)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This should return true iff val is within the range of supported values. (If IsDiscrete returns true, val will contain only discrete values, so you don't need to check for that.).  <a href="#7d9b8d026e832facc4c9088b3f7e40ad"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#76023b61377d8259a3ea8af4e72e03c7">logLikelihood</a> (double x, <a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html">GBayesianNetworkNode</a> *pSpecialParent, double specialParentValue)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compute the log-likelihood of the value "x" given the current values of all of this node's parent nodes, (except, to facilitate Gibb's Sampling, if one of the parent nodes is "pSpecialParent", then "specialParentValue" should be used for that parent's value instead of that parent's current value. If this function returns nan or anything &lt;= -1e200, the sample will be rejected without consideration. (Note that these likelihoods don't need to be normalized. It's okay of they sum/integrate to a constant instead of to 1.).  <a href="#76023b61377d8259a3ea8af4e72e03c7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#81d4c9fe2dc440dfe9c29216b85e9b2c">currentValue</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#b9d78dfb442372cdbbf22341d7344b22">sample</a> (<a class="el" href="class_g_classes_1_1_g_rand.html">GRand</a> *pRand)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Uses a combination of Metropolis, and Gibb's Sampling to resample the node. (Also, this dynamically adjusts the sampling distribution variance.).  <a href="#b9d78dfb442372cdbbf22341d7344b22"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#263150ad3101264715077022fc0cfa30">gibbs</a> (double x)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Computes the log-probability of x (as a value for this node) given the current values for the entire rest of the network (aka the complete conditional), which according to Gibbs, is equal to the log-probability of x given the Markov-Blanket of this node, which we can compute efficiently.  <a href="#263150ad3101264715077022fc0cfa30"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#8c86bf496d5ad320e00d13643fd9c983">metropolis</a> (<a class="el" href="class_g_classes_1_1_g_rand.html">GRand</a> *pRand)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sample the network in a manner that can be proven to converge to a true joint distribution for the network. Returns true if the new candidate value is selected.  <a href="#8c86bf496d5ad320e00d13643fd9c983"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#c5652a6d676a7526f62fbd5ec65b84c2">m_currentMean</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#52370e1edb5c3c448d0d68e42c821e26">m_currentDeviation</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#61e07d54958ffedaa1459a6c2d8ff3b2">m_nSamples</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#a911029f82705aef4eb1eff42ed2bf13">m_nNewValues</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#1cada2ed254190e2082a3e673f03e053">m_sumOfValues</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#fe9a93600acf4eb6a15aa81ad1b69da1">m_sumOfSquaredValues</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is the base class for all nodes in a Bayesian network. Classes that inherit from this class must implement three pure virtual methods. Note that the <a class="el" href="class_g_classes_1_1_g_univariate_distribution.html" title="This is the base class for univariate distributions.">GUnivariateDistribution</a> class has an IsDiscrete and an IsSupported method, so if your class wraps a <a class="el" href="class_g_classes_1_1_g_univariate_distribution.html" title="This is the base class for univariate distributions.">GUnivariateDistribution</a> then two of them are taken care of for you. In order to implement ComputeLogLikelihood, your class will probably need references to its parent nodes so that it can obtain their values to use as parameters for its distribution. You can implement your network structure however you like. When you have your network set up, you're ready to use MCMC to infer values for the network. To do this, just create a loop that calls Sample on each node in the network, and the whole network should eventually converge to good values. (Also, you need to make <a class="el" href="class_g_classes_1_1_g_bayesian_network_child_iterator.html" title="Iterates through all the children of the specified node in a Bayesian network.">GBayesianNetworkChildIterator</a> work, which I haven't worked out yet.). <hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="980c95c3894ce7247465a1c5d22b0a8b"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::GBayesianNetworkNode" ref="980c95c3894ce7247465a1c5d22b0a8b" args="(double priorMean, double priorDeviation)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GClasses::GBayesianNetworkNode::GBayesianNetworkNode           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>priorMean</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>priorDeviation</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="1ea66de16e4313ea32fae405101c14da"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::~GBayesianNetworkNode" ref="1ea66de16e4313ea32fae405101c14da" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual GClasses::GBayesianNetworkNode::~GBayesianNetworkNode           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="81d4c9fe2dc440dfe9c29216b85e9b2c"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::currentValue" ref="81d4c9fe2dc440dfe9c29216b85e9b2c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double GClasses::GBayesianNetworkNode::currentValue           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="263150ad3101264715077022fc0cfa30"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::gibbs" ref="263150ad3101264715077022fc0cfa30" args="(double x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double GClasses::GBayesianNetworkNode::gibbs           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Computes the log-probability of x (as a value for this node) given the current values for the entire rest of the network (aka the complete conditional), which according to Gibbs, is equal to the log-probability of x given the Markov-Blanket of this node, which we can compute efficiently. 
<p>

</div>
</div><p>
<a class="anchor" name="bc432f1459d8bef65a3b60cad16f0965"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::isDiscrete" ref="bc432f1459d8bef65a3b60cad16f0965" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool GClasses::GBayesianNetworkNode::isDiscrete           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This should return true iff this node supports only discrete values. 
<p>

</div>
</div><p>
<a class="anchor" name="7d9b8d026e832facc4c9088b3f7e40ad"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::isSupported" ref="7d9b8d026e832facc4c9088b3f7e40ad" args="(double val)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool GClasses::GBayesianNetworkNode::isSupported           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>val</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This should return true iff val is within the range of supported values. (If IsDiscrete returns true, val will contain only discrete values, so you don't need to check for that.). 
<p>

</div>
</div><p>
<a class="anchor" name="76023b61377d8259a3ea8af4e72e03c7"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::logLikelihood" ref="76023b61377d8259a3ea8af4e72e03c7" args="(double x, GBayesianNetworkNode *pSpecialParent, double specialParentValue)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual double GClasses::GBayesianNetworkNode::logLikelihood           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html">GBayesianNetworkNode</a> *&nbsp;</td>
          <td class="paramname"> <em>pSpecialParent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>specialParentValue</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compute the log-likelihood of the value "x" given the current values of all of this node's parent nodes, (except, to facilitate Gibb's Sampling, if one of the parent nodes is "pSpecialParent", then "specialParentValue" should be used for that parent's value instead of that parent's current value. If this function returns nan or anything &lt;= -1e200, the sample will be rejected without consideration. (Note that these likelihoods don't need to be normalized. It's okay of they sum/integrate to a constant instead of to 1.). 
<p>

</div>
</div><p>
<a class="anchor" name="8c86bf496d5ad320e00d13643fd9c983"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::metropolis" ref="8c86bf496d5ad320e00d13643fd9c983" args="(GRand *pRand)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GClasses::GBayesianNetworkNode::metropolis           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_g_classes_1_1_g_rand.html">GRand</a> *&nbsp;</td>
          <td class="paramname"> <em>pRand</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sample the network in a manner that can be proven to converge to a true joint distribution for the network. Returns true if the new candidate value is selected. 
<p>

</div>
</div><p>
<a class="anchor" name="b9d78dfb442372cdbbf22341d7344b22"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::sample" ref="b9d78dfb442372cdbbf22341d7344b22" args="(GRand *pRand)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GBayesianNetworkNode::sample           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_g_classes_1_1_g_rand.html">GRand</a> *&nbsp;</td>
          <td class="paramname"> <em>pRand</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Uses a combination of Metropolis, and Gibb's Sampling to resample the node. (Also, this dynamically adjusts the sampling distribution variance.). 
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="52370e1edb5c3c448d0d68e42c821e26"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::m_currentDeviation" ref="52370e1edb5c3c448d0d68e42c821e26" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#52370e1edb5c3c448d0d68e42c821e26">GClasses::GBayesianNetworkNode::m_currentDeviation</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="c5652a6d676a7526f62fbd5ec65b84c2"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::m_currentMean" ref="c5652a6d676a7526f62fbd5ec65b84c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#c5652a6d676a7526f62fbd5ec65b84c2">GClasses::GBayesianNetworkNode::m_currentMean</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="a911029f82705aef4eb1eff42ed2bf13"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::m_nNewValues" ref="a911029f82705aef4eb1eff42ed2bf13" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#a911029f82705aef4eb1eff42ed2bf13">GClasses::GBayesianNetworkNode::m_nNewValues</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="61e07d54958ffedaa1459a6c2d8ff3b2"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::m_nSamples" ref="61e07d54958ffedaa1459a6c2d8ff3b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#61e07d54958ffedaa1459a6c2d8ff3b2">GClasses::GBayesianNetworkNode::m_nSamples</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="fe9a93600acf4eb6a15aa81ad1b69da1"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::m_sumOfSquaredValues" ref="fe9a93600acf4eb6a15aa81ad1b69da1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#fe9a93600acf4eb6a15aa81ad1b69da1">GClasses::GBayesianNetworkNode::m_sumOfSquaredValues</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="1cada2ed254190e2082a3e673f03e053"></a><!-- doxytag: member="GClasses::GBayesianNetworkNode::m_sumOfValues" ref="1cada2ed254190e2082a3e673f03e053" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_g_classes_1_1_g_bayesian_network_node.html#1cada2ed254190e2082a3e673f03e053">GClasses::GBayesianNetworkNode::m_sumOfValues</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Nov 2 14:18:23 2010 for GClasses by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
